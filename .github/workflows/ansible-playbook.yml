name: CI

on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout
      uses: actions/checkout@v2

    - name: Test Ansible playbook
      uses: roles-ansible/check-ansible-debian-buster-action@v0.4
      with:
        targets: "playbook.yml"
        #  [required]
        #   Paths to your ansible role or playboox.yml you want to test
        #   Some Examples:
        #   targets: "role/my_role/"
        #   targets: "site.yml"
        #
        group: "test"
        #  [optional]
        #   When testing playbooks you have to tell ansible
        #   the group you that we write in our hosts file.
        #   example:
        #   group: 'servers'
        #
        hosts: "localhost\n\n[app:children]\ntest"
        #  [optional]
        #   When testing playbooks you have to give one example
        #   host this action should use to test your playbook.
        #   > We only spawn one docker container that mean
        #   > we can only test one host at the time. Sorry
        #   some examples:
        #   hosts: 'localhost'
        #   hosts: 'srv01.example.com'
        #
        # requirements: ""
        #  [optional]
        #   When testing playbooks and you are using ansible galaxy,
        #   you may be interested in installing your requirements
        #   from ansible galaxy.
        #   To do this please provide us either the role name directly
        #   requirements: 'do1jlr.ansible_version'
        #   or your requiements.yml file.
        #   requirements: 'requirements.yml'
        #
        # vars: ""
        #  [optional]
        #   Some of your test scenarios require custom variables.
        #   You can set them like this:
        #   vars: "foo: bar"
        #   You can also use usual bash formating features like '\n'
        #   currently you need 6 leading spaces for each new line.
        #   > You are welcome to help us impove that!
        #   vars: "foo: bar\n      fnord:\n        value: bar"
